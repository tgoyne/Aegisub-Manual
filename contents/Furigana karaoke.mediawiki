[[Image:Furigana-demo-1.png|frame|right|Sample of basic furigana karaoke]]

''Furigana'' (in Aegisub often shortened to ''furi'') refers to little phonetic guide characters written along the main text in Japanese, specifically using the hiragana phonetic alphabet to describe how the ideographic kanji characters should be pronounced. Putting smaller text next to a main line of text is in general referred to as [http://en.wikipedia.org/wiki/Ruby_character ''ruby text''], but since the implementation discussed here is designed specifically with Japanese furigana in mind, the ruby text is also referred to as furigana everywhere.

None of the subtitle formats Aegisub supports, natively support ruby text or furigana, however the [[Automation 4 karaskel.lua]] standard include implements an algorithm that can create basic furigana layouts by calculating the position of every individual character.

This page describes the syntax the Automation 4 karaskel.lua script understands for furigana text, and how to use the layout information it calculates to actually create positioned characters.

[[Karaoke Templater]] also implements support for furigana using the karaskel.lua algorithm and syntax.

It's important to note that the syntax is designed for karaoke, and revolves around [[Karaoke timing|karaoke timed]] text.

== Multi-highlight syntax ==

Along with the furigana syntax comes the ''multi-highlight'' syntax, which is a way to signal that a single piece of text covers multiple karaoke syllables but can't be broken further down. By using the multi-highlight syntax you can give the same piece of text multiple consecutive highlights.

The most common use of this is kanji characters that cover multiple syllables, but you might also think of other, innovative uses.

{{todo|do it}}

== Basic furigana ==

{{todo|you add furigana by putting a pipe and the furi at the end of a syllable}}

== Controlling the layout ==

{{todo|layout is usually automatic and takes some guesses, but when two separate furi'ed sequences touch, or when they just get too close, you might need to control the layout}}

== Examples ==
{{Examplebox|
Here's a quick sample for kara-templater that does furigana.
Try it out with Default being MS PGothic size 30.

<pre>Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,template syl,{\pos(!line.left+syl.center!,!line.middle!)\an5\k!syl.start_time/10!\k$kdur}
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,template furi,{\pos(!line.left+syl.center!,!line.middle-line.height!)\an5\k!syl.start_time/10!\k$kdur}
Comment: 0,0:00:00.00,0:00:02.00,Default,,0000,0000,0000,karaoke,{\k15}二|ふ{\k15}#|た{\k10}人|り{\k15}だ{\k57}け{\k5}の{\k6}地|ほ{\k5}球|し{\k8}で
Comment: 0,0:00:02.00,0:00:04.00,Default,,0000,0000,0000,karaoke,{\k10}中|ちゅ{\k10}#|う{\k10}国|ご{\k10}#|く{\k10}魂|<た{\k10}#|ま{\k10}#|し{\k10}#|い
Comment: 0,0:00:04.00,0:00:06.00,Default,,0000,0000,0000,karaoke,{\k10}中|ちゅ{\k10}#|う{\k10}国|ご{\k10}#|く{\k10}魂|!た{\k10}#|ま{\k10}#|し{\k10}#|い</pre>

Using MS PGothic 30 pt, 15 pt for the furigana, the three lines render like this:

[[Image:Furigana-demo-1.png]]

[[Image:Furigana-demo-2.png]]

[[Image:Furigana-demo-3.png]]
}}